<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>detect-provider</title>
	<link href="bootstrap-5.1.3/css/bootstrap.css" rel="stylesheet">
</head>
<body>

	<a class="btn btn-danger" href="wc:00e46b69-d0cc-4b3e-b6a2-cee442f97188@1?bridge=https%3A%2F%2Fbridge.walletconnect.org&key=91303dedf64285cbbaf9120f6e9d160a5c8aa3deb67017a3874cd272323f48ae">Conectar desde el mobile</a>
	<button id="login" class="btn btn-success">Login With MetaMask</button>
	<h2>Account: <span id="showAccount" class="text-success"></span></h2>


<script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
<script type="text/javascript">
	var btn = document.getElementById('login');


	const provider =  detectEthereumProvider()

	if (!provider) {
		btn.classList.remove("btn-success");
		btn.classList.add("btn-danger");
		btn.setAttribute('disabled','disabled');
		btn.innerHTML = "MetaMask is not installed!";
	}

	async function loginAccount() {
		var showAccount = document.getElementById('showAccount');
		const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
		const account = accounts[0];
  		showAccount.innerHTML = account;
  		//showAccount.innerHTML = account.substring(0,5) +'..'+account.substr(account.length - 4);

  		btn.innerHTML = "MetaMask is Connect!";
  		btn.setAttribute('disabled','disabled');
  		btn.classList.add("disabled");
	}

	btn.addEventListener('click', loginAccount);
</script> 
</body>
</html>